{"version":3,"file":"plugin.min.js","sources":["../src/plugin.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tiny formatting for Moodle\n *\n * @module      tiny_formatting/plugin\n * @copyright   2024, ISB Bayern\n * @author      Dr. Peter Mayer\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {pluginName} from './common';\n\n// Setup the tiny_formatting Plugin.\nconst configureMenu = (menu) => {\n    if (menu.format.items.match(/\\bblocks\\b/)) {\n        menu.format.items = menu.format.items.replace(\n            /(\\bblocks\\b)/,\n            ' styles $1 fontfamily fontsize',\n        );\n    } else {\n        menu.format.items = `${menu.format.items} | fontfamily fontsize`;\n    }\n\n    if (menu.format.items.match(/\\blanguage\\b/)) {\n        menu.format.items = menu.format.items.replace(\n            /(\\blanguage\\b)/,\n            ' forecolor backcolor | $1',\n        );\n    } else {\n        menu.format.items = `${menu.format.items} | forecolor backcolor`;\n    }\n    return menu;\n};\n\n// 'lib/editor/tiny/plugins/formatting/fonts/Grundschulschrift_1.ttf';\n// 'lib/editor/tiny/plugins/formatting/fonts/Handschrift_1.ttf';\n\n// eslint-disable-next-line no-async-promise-executor\nexport default new Promise(async (resolve) => {\n    resolve([pluginName, {\n        configure: (instanceConfig) => ({\n            menu: configureMenu(instanceConfig.menu),\n            content_style: \"@import url('/lib/editor/tiny/plugins/formatting/fonts/Grundschulschrift_1.ttf'); body { font-family: Grundschulschrift_1; }\",\n            font_formats: 'Grundschulschrift_1=Grundschulschrift_1; '\n        }),\n    }]);\n});\n"],"names":["Promise","async","resolve","pluginName","configure","instanceConfig","menu","format","items","match","replace","content_style","font_formats"],"mappings":"gLAoDe,IAAIA,SAAQC,MAAAA,UACvBC,QAAQ,CAACC,mBAAY,CACjBC,UAAYC,wBACRC,MA5BWA,KA4BSD,eAAeC,KA3BvCA,KAAKC,OAAOC,MAAMC,MAAM,cACxBH,KAAKC,OAAOC,MAAQF,KAAKC,OAAOC,MAAME,QAClC,eACA,kCAGJJ,KAAKC,OAAOC,gBAAWF,KAAKC,OAAOC,gCAGnCF,KAAKC,OAAOC,MAAMC,MAAM,gBACxBH,KAAKC,OAAOC,MAAQF,KAAKC,OAAOC,MAAME,QAClC,iBACA,6BAGJJ,KAAKC,OAAOC,gBAAWF,KAAKC,OAAOC,gCAEhCF,MAWCK,cAAe,+HACfC,aAAc,6CA9BHN,IAAAA"}